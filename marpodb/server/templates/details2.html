{% extends "layout.html" %}
{% block head %}
	<!-- CHART -->
	<script src="/static/javascript/Scribl.1.1.4.1.min.js" type="text/javascript"></script>
	<!-- SEQVIEW -->
	<script src="/static/javascript/sequence-viewer.bundle.js" type="text/javascript"></script>
	<script src="/static/javascript/seqviewer.js"></script>

	<script>
		var seq = "{{seq}}";
		var genes = {}
		var cdsDBID = "{{cdsDBID}}"

		{% for genedbid, gene in geneCoordinates.iteritems() %}
			gene = {"parts" : {}, "strand" : {{gene['strand']}} }

			{% for dbid, coordinates in gene['features'].iteritems() %}
				gene["parts"]["{{dbid}}"] = "{{coordinates}}"
			{% endfor %}

			genes[ "{{genedbid}}" ] = gene;
		{% endfor %}

	</script>

{% include 'chart2.html' %}

{% endblock %}


{% block content %}

<div class="gene-details">
	<div class = "geneStucture">
		<div class = "geneView" >
				<canvas id = "geneViewCanvas" width="740px"></canvas>
		</div>

		<h2 class="section" >Sequence-viewer</h2>

		<div id="seqView" class="seqView"></div>

	</div>
</div>

<script>
	$(function(){
		draw("geneViewCanvas");
		seqviewer(seq, "#seqView");
	});
</script>

{% endblock %}